{"ast":null,"code":"import { __decorate } from \"tslib\";\n// src/app/pages/result/result.component.ts\nimport { Component } from '@angular/core';\nexport let ResultComponent = class ResultComponent {\n  constructor(route, router, dataService) {\n    this.route = route;\n    this.router = router;\n    this.dataService = dataService;\n    this.userSkillIds = [];\n    this.matchPercentage = 0;\n    this.recommendedCourses = [];\n    this.ownedSkillNames = [];\n  }\n  ngOnInit() {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    const state = history.state || {};\n    this.userSkillIds = state.userSkillIds || [];\n    this.dataService.getSpecializationById(id).subscribe(spec => {\n      this.specialization = spec;\n      if (!spec) {\n        // لو ما فيه تخصص – نرجع للتخصصات\n        this.router.navigate(['/specializations']);\n        return;\n      }\n      this.calculateMatch(spec);\n      this.generateRecommendations(spec);\n    });\n  }\n  calculateMatch(spec) {\n    const total = spec.requirements.length;\n    const matchedCount = spec.requirements.filter(req => this.userSkillIds.includes(req.id)).length;\n    this.matchPercentage = total ? Math.round(matchedCount / total * 100) : 0;\n    // أسماء المهارات اللي يمتلكها المستخدم للعرض\n    this.ownedSkillNames = spec.requirements.filter(r => this.userSkillIds.includes(r.id)).map(r => r.name);\n  }\n  generateRecommendations(spec) {\n    const missing = spec.requirements.filter(req => !this.userSkillIds.includes(req.id));\n    this.recommendedCourses = missing.map(m => `دورة لتعلم ${m.name}`);\n  }\n  goBack() {\n    this.router.navigate(['/specializations']);\n  }\n};\nResultComponent = __decorate([Component({\n  selector: 'app-result',\n  templateUrl: './result.component.html',\n  styleUrls: ['./result.component.scss']\n})], ResultComponent);","map":{"version":3,"names":["Component","ResultComponent","constructor","route","router","dataService","userSkillIds","matchPercentage","recommendedCourses","ownedSkillNames","ngOnInit","id","Number","snapshot","paramMap","get","state","history","getSpecializationById","subscribe","spec","specialization","navigate","calculateMatch","generateRecommendations","total","requirements","length","matchedCount","filter","req","includes","Math","round","r","map","name","missing","m","goBack","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\skillmate-client\\src\\app\\Pages\\result\\result.component.ts"],"sourcesContent":["// src/app/pages/result/result.component.ts\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DataService, Specialization, Skill } from '../../services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-result',\r\n  templateUrl: './result.component.html',\r\n  styleUrls: ['./result.component.scss']\r\n})\r\nexport class ResultComponent implements OnInit {\r\n  specialization?: Specialization;\r\n  userSkillIds: number[] = [];\r\n  matchPercentage: number = 0;\r\n  recommendedCourses: string[] = [];\r\n  ownedSkillNames: string[] = [];\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private dataService: DataService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const id = Number(this.route.snapshot.paramMap.get('id'));\r\n    const state = history.state || {};\r\n    this.userSkillIds = state.userSkillIds || [];\r\n\r\n    this.dataService.getSpecializationById(id).subscribe(spec => {\r\n      this.specialization = spec;\r\n      if (!spec) {\r\n        // لو ما فيه تخصص – نرجع للتخصصات\r\n        this.router.navigate(['/specializations']);\r\n        return;\r\n      }\r\n      this.calculateMatch(spec);\r\n      this.generateRecommendations(spec);\r\n    });\r\n  }\r\n\r\n  calculateMatch(spec: Specialization) {\r\n    const total = spec.requirements.length;\r\n    const matchedCount = spec.requirements.filter(req =>\r\n      this.userSkillIds.includes(req.id)\r\n    ).length;\r\n    this.matchPercentage = total ? Math.round((matchedCount / total) * 100) : 0;\r\n\r\n    // أسماء المهارات اللي يمتلكها المستخدم للعرض\r\n    this.ownedSkillNames = spec.requirements\r\n      .filter(r => this.userSkillIds.includes(r.id))\r\n      .map(r => r.name);\r\n  }\r\n\r\n  generateRecommendations(spec: Specialization) {\r\n    const missing = spec.requirements.filter(req => !this.userSkillIds.includes(req.id));\r\n    this.recommendedCourses = missing.map(m => `دورة لتعلم ${m.name}`);\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/specializations']);\r\n  }\r\n}\r\n"],"mappings":";AAAA;AACA,SAASA,SAAS,QAAgB,eAAe;AAS1C,WAAMC,eAAe,GAArB,MAAMA,eAAe;EAO1BC,YACUC,KAAqB,EACrBC,MAAc,EACdC,WAAwB;IAFxB,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,WAAW,GAAXA,WAAW;IARrB,KAAAC,YAAY,GAAa,EAAE;IAC3B,KAAAC,eAAe,GAAW,CAAC;IAC3B,KAAAC,kBAAkB,GAAa,EAAE;IACjC,KAAAC,eAAe,GAAa,EAAE;EAM3B;EAEHC,QAAQA,CAAA;IACN,MAAMC,EAAE,GAAGC,MAAM,CAAC,IAAI,CAACT,KAAK,CAACU,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC,CAAC;IACzD,MAAMC,KAAK,GAAGC,OAAO,CAACD,KAAK,IAAI,EAAE;IACjC,IAAI,CAACV,YAAY,GAAGU,KAAK,CAACV,YAAY,IAAI,EAAE;IAE5C,IAAI,CAACD,WAAW,CAACa,qBAAqB,CAACP,EAAE,CAAC,CAACQ,SAAS,CAACC,IAAI,IAAG;MAC1D,IAAI,CAACC,cAAc,GAAGD,IAAI;MAC1B,IAAI,CAACA,IAAI,EAAE;QACT;QACA,IAAI,CAAChB,MAAM,CAACkB,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC;QAC1C;;MAEF,IAAI,CAACC,cAAc,CAACH,IAAI,CAAC;MACzB,IAAI,CAACI,uBAAuB,CAACJ,IAAI,CAAC;IACpC,CAAC,CAAC;EACJ;EAEAG,cAAcA,CAACH,IAAoB;IACjC,MAAMK,KAAK,GAAGL,IAAI,CAACM,YAAY,CAACC,MAAM;IACtC,MAAMC,YAAY,GAAGR,IAAI,CAACM,YAAY,CAACG,MAAM,CAACC,GAAG,IAC/C,IAAI,CAACxB,YAAY,CAACyB,QAAQ,CAACD,GAAG,CAACnB,EAAE,CAAC,CACnC,CAACgB,MAAM;IACR,IAAI,CAACpB,eAAe,GAAGkB,KAAK,GAAGO,IAAI,CAACC,KAAK,CAAEL,YAAY,GAAGH,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;IAE3E;IACA,IAAI,CAAChB,eAAe,GAAGW,IAAI,CAACM,YAAY,CACrCG,MAAM,CAACK,CAAC,IAAI,IAAI,CAAC5B,YAAY,CAACyB,QAAQ,CAACG,CAAC,CAACvB,EAAE,CAAC,CAAC,CAC7CwB,GAAG,CAACD,CAAC,IAAIA,CAAC,CAACE,IAAI,CAAC;EACrB;EAEAZ,uBAAuBA,CAACJ,IAAoB;IAC1C,MAAMiB,OAAO,GAAGjB,IAAI,CAACM,YAAY,CAACG,MAAM,CAACC,GAAG,IAAI,CAAC,IAAI,CAACxB,YAAY,CAACyB,QAAQ,CAACD,GAAG,CAACnB,EAAE,CAAC,CAAC;IACpF,IAAI,CAACH,kBAAkB,GAAG6B,OAAO,CAACF,GAAG,CAACG,CAAC,IAAI,cAAcA,CAAC,CAACF,IAAI,EAAE,CAAC;EACpE;EAEAG,MAAMA,CAAA;IACJ,IAAI,CAACnC,MAAM,CAACkB,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC;EAC5C;CACD;AAnDYrB,eAAe,GAAAuC,UAAA,EAL3BxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,C,EACW1C,eAAe,CAmD3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}